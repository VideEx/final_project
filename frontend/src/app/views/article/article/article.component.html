<section class="article" *ngIf="article">
  <div class="container">
    <div class="article-subtitle">
      <a routerLink="/blog" [queryParams]="{page: 1}">Блог<span>/</span></a>
      <span>{{article.title}}</span>
    </div>
    <div class="article-main">
      <div class="article-head">
        <div class="article-head-info">
          <h2>{{article.title}}</h2>
          <div class="article-head-info-description">{{article.description}}</div>
        </div>
        <div class="article-head-image" style="background-image: url({{serverStaticPath + article.image}})"></div>
      </div>
      <div class="article-body">
        <div class="article-body-main">
          <div [innerHTML]="article.text" class="article-body-text"></div>
          <div class="article-share-social">
            <span>Понравилась статья? Поделитесь ею в своих социальных сетях!</span>

            <div class="ya-share2" data-curtain data-shape="round" data-services="vkontakte,odnoklassniki,moimir"></div>
            <a href="#">
              <svg width="19.999756" height="19.999695" viewBox="0 0 19.9998 19.9997" fill="none"
                   xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <rect id="VK" width="19.999676" height="19.999676" fill="#FFFFFF" fill-opacity="0"/>
                <g clip-path="url(#clip17_2179)">
                  <path id="Vector"
                        d="M3.82 0.17C1.82 0.17 0.17 1.82 0.17 3.82L0.17 16.17C0.17 18.17 1.82 19.82 3.82 19.82L16.17 19.82C18.17 19.82 19.82 18.17 19.82 16.17L19.82 3.82C19.82 1.82 18.17 0.17 16.17 0.17L3.82 0.17ZM3.82 1.96L16.17 1.96C17.21 1.96 18.03 2.78 18.03 3.82L18.03 16.17C18.03 17.21 17.21 18.03 16.17 18.03L3.82 18.03C2.78 18.03 1.96 17.21 1.96 16.17L1.96 3.82C1.96 2.78 2.78 1.96 3.82 1.96ZM9.74 6.63C9.09 6.62 8.53 6.63 8.22 6.78C8.01 6.88 7.85 7.11 7.94 7.12C8.07 7.14 8.34 7.2 8.49 7.4C8.68 7.65 8.67 8.23 8.67 8.23C8.67 8.23 8.77 9.81 8.41 10.01C8.17 10.15 7.83 9.87 7.1 8.61C6.72 7.96 6.44 7.25 6.44 7.25C6.44 7.25 6.39 7.12 6.29 7.05C6.17 6.96 6.01 6.93 6.01 6.93L4.26 6.94C4.26 6.94 4 6.95 3.91 7.06C3.82 7.17 3.9 7.38 3.9 7.38C3.9 7.38 5.27 10.57 6.81 12.18C8.23 13.66 9.84 13.57 9.84 13.57L10.58 13.57C10.58 13.57 10.8 13.54 10.91 13.42C11.01 13.31 11.01 13.1 11.01 13.1C11.01 13.1 11 12.12 11.45 11.98C11.9 11.84 12.47 12.92 13.08 13.34C13.55 13.66 13.9 13.59 13.9 13.59L15.53 13.57C15.53 13.57 16.38 13.51 15.98 12.84C15.94 12.79 15.74 12.35 14.77 11.44C13.74 10.49 13.88 10.64 15.11 9C15.86 8 16.16 7.39 16.07 7.12C15.98 6.88 15.42 6.94 15.42 6.94L13.59 6.95C13.59 6.95 13.45 6.94 13.35 7C13.25 7.05 13.19 7.19 13.19 7.19C13.19 7.19 12.9 7.97 12.51 8.63C11.69 10.02 11.36 10.09 11.23 10C10.92 9.8 11 9.2 11 8.77C11 7.42 11.2 6.86 10.6 6.71C10.4 6.66 10.25 6.63 9.74 6.63Z"
                        fill="#709FDC" fill-opacity="1.000000" fill-rule="nonzero"/>
                </g>
              </svg>
            </a>
            <a href="#">
              <svg width="20.000244" height="20.000000" viewBox="0 0 20.0002 20" fill="none"
                   xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <rect id="Facebook" width="20.000204" height="20.000000" fill="#FFFFFF" fill-opacity="0"/>
                <g clip-path="url(#clip17_2175)">
                  <path id="Vector"
                        d="M9.99 0C4.48 0 0 4.48 0 10C0 15.51 4.48 20 9.99 20C15.51 20 19.99 15.51 19.99 10C19.99 4.48 15.51 0 9.99 0ZM9.99 1.66C14.61 1.66 18.33 5.38 18.33 10C18.33 14.18 15.25 17.63 11.24 18.23L11.24 12.43L13.61 12.43L13.98 10.01L11.24 10.01L11.24 8.7C11.24 7.7 11.56 6.81 12.5 6.81L14 6.81L14 4.71C13.74 4.67 13.18 4.59 12.12 4.59C9.92 4.59 8.62 5.76 8.62 8.41L8.62 10.01L6.36 10.01L6.36 12.43L8.62 12.43L8.62 18.21C4.67 17.55 1.66 14.14 1.66 10C1.66 5.38 5.38 1.66 9.99 1.66Z"
                        fill="#709FDC" fill-opacity="1.000000" fill-rule="nonzero"/>
                </g>
              </svg>
            </a>
            <a href="#">
              <svg width="19.999756" height="19.999695" viewBox="0 0 19.9998 19.9997" fill="none"
                   xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <rect id="Instagram" width="19.999676" height="19.999676" fill="#FFFFFF" fill-opacity="0"/>
                <g clip-path="url(#clip17_2177)">
                  <path id="Vector"
                        d="M5.95 0.17C2.78 0.17 0.17 2.78 0.17 5.95L0.17 14.04C0.17 17.21 2.78 19.82 5.95 19.82L14.04 19.82C17.21 19.82 19.82 17.21 19.82 14.04L19.82 5.95C19.82 2.78 17.21 0.17 14.04 0.17L5.95 0.17ZM5.95 1.96L14.04 1.96C16.25 1.96 18.03 3.74 18.03 5.95L18.03 14.04C18.03 16.25 16.25 18.03 14.04 18.03L5.95 18.03C3.74 18.03 1.96 16.25 1.96 14.04L1.96 5.95C1.96 3.74 3.74 1.96 5.95 1.96ZM15.27 3.91C14.82 3.91 14.46 4.27 14.46 4.72C14.46 5.17 14.82 5.53 15.27 5.53C15.72 5.53 16.08 5.17 16.08 4.72C16.08 4.27 15.72 3.91 15.27 3.91ZM10 4.64C7.05 4.64 4.64 7.05 4.64 9.99C4.64 12.94 7.05 15.35 10 15.35C12.94 15.35 15.35 12.94 15.35 9.99C15.35 7.05 12.94 4.64 10 4.64ZM10 6.42C11.98 6.42 13.57 8.01 13.57 9.99C13.57 11.98 11.98 13.57 10 13.57C8.01 13.57 6.42 11.98 6.42 9.99C6.42 8.01 8.01 6.42 10 6.42Z"
                        fill="#709FDC" fill-opacity="1.000000" fill-rule="nonzero"/>
                </g>
              </svg>
            </a>
          </div>
          <div class="article-comments">
            <h2>Комментарии к статье</h2>
            <div class="article-comments-subtitle" *ngIf="!userIsLoggedIn">
              Чтобы оставлять комментарии, <a routerLink="/login" >войдите</a> или <a routerLink="/signup">зарегистрируйтесь</a>.
            </div>
            <div class="article-comments-subtitle" *ngIf="userIsLoggedIn && (!article.comments || article.comments.length <=0)">
              Будьте первым, кто оставит свой комментарий к статье!
            </div>
            <form #writeComment="ngForm" class="article-comments-write" *ngIf="userIsLoggedIn">
              <textarea name="text" placeholder="Напишите Ваш комментарий к статье..." required #text='ngModel'
                        rows="5" cols="60"
                        [ngStyle]="{'border-color': text.invalid && (text.dirty || text.touched) ? 'red': ''}"
                        [(ngModel)]="commentForm.text"
              ></textarea>
              <button class="button" type="submit" [disabled]="!writeComment.valid" (click)="submitForm(writeComment)">Опубликовать комментарий</button>
            </form>
            <div class="article-comments-items" *ngIf="article.comments && article.comments.length > 0">
              <app-comments *ngFor="let comment of commentsOnPage" [comment]="comment" (addToReactionEvent)="changeReaction($event)"></app-comments>

              <div class="article-comments-loading" *ngIf="!isLoading && article.commentsCount > commentCountOnPage" (click)="downloadComments()">
                <span>Загрузить ещё комментарии</span>
                <svg width="20.000000" height="20.000000" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <rect id="Arrow" width="20.000000" height="20.000000" fill="#FFFFFF" fill-opacity="0"/>
                  <path id="Vector" d="M10 14C9.41 14 8.83 13.77 8.39 13.33L2.95 7.9C2.71 7.65 2.71 7.25 2.95 7.01C3.2 6.77 3.59 6.77 3.84 7.01L9.27 12.45C9.67 12.85 10.32 12.85 10.72 12.45L16.15 7.01C16.4 6.77 16.79 6.77 17.04 7.01C17.28 7.25 17.28 7.65 17.04 7.9L11.6 13.33C11.16 13.77 10.58 14 10 14Z" fill="#709FDC" fill-opacity="1.000000" fill-rule="nonzero"/>
                  <g opacity="0.000000"/>
                </svg>
              </div>
            </div>
            <div class="article-comments-no-items" *ngIf="!userIsLoggedIn && (!article.comments || article.comments.length <= 0)">
              Комментариев пока нет
            </div>
          </div>
        </div>
        <div class="article-body-related-articles">
          <div class="article-body-related-articles-head">Читайте также:</div>
          <div class="article-body-related-articles-items">
            <app-article-card [article]="article" *ngFor="let article of relatedArticle"></app-article-card>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
